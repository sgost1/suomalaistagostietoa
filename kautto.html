<!DOCTYPE html>
<html lang="fi">
<head>
  <link href="main.css" rel="stylesheet"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta charset="UTF-8"/>
  <title>GrapheneOS Tieto | Käyttö</title>
  <meta name="description" content="Suomalaista GrapheneOS tietoa"/>
  <meta property="og:image" content="https://grapheneos.org/opengraph.png"/>
  <meta property="og:image:width" content="512"/>
  <meta property="og:image:height" content="512"/>
  <meta property="og:image:alt" content="GrapheneOS logo"/>
  <meta property="og:site_name" content="GrapheneOS"/>
  <meta property="og:type" content="website"/>
  <meta property="og:title" content="Suomalaista GrapheneOS tietoa"/>
  <link rel="icon" href="favicon.ico"/>
  <link rel="icon" sizes="any" type="image/svg+xml" href="favicon.svg"/>
  <link rel="mask-icon" href="mask-icon.svg" color="#1a1a1a"/>
  <link rel="apple-touch-icon" href="apple-touch-icon.png"/>
</head>
<body>

<nav id="navigointi">
<ul>
<li><a href="index.html">GrapheneOS</a></li>
<li><a href="features.html">Ominaisuudet</a></li>
<li aria-current="page"><a href="kautto.html">Käyttö</a></li>
<li><a href="kysymys.html">Q&A</a></li>
<li><a href="artikkelit.html">Artikkelit</a></li>
</ul>
</nav>
<main>
<a href="#kautto"></a>

<h1 id="otsikot"><a href="#käyttö">Käyttö<img id="kuvah" src="mask-icon.svg" alt="GrapheneOS logo"></a></h1>

<nav id="sisältö">
<h2 id="otsikot"><a href="#sisältö">Sisältö</a></h2>
<ul id="vasenviiva">
  <li><a href="#paivitukset">Päivitykset</a></li>
    <ul>
      <li><a href="#update-asetukset">Päivitys asetukset</a></li>
      <li><a href="#update-turvallisuus">Päivitys Turvallisuus</a></li>
      <li><a href="#update-pois">Päivitysten pois kytkeminen</a></li>
      <li><a href="#update-sideload">Päivitysten Sideloading</a></li>
    </ul>
  <li><a href="#exec">Exec Spawning</a></li>
  <li><a href="#selain">Selain</a></li>
  <li><a href="#salaus">Laitteen salaus</a></li>
  <li><a href="#auditor">Auditor</a></li>
  <li><a href="#yhteen">Yhteensopivuskerros</a></li>
  <ul>
    <li><a href="#yhteensopivuus-kerroksen-konfigurointi">Yhteensopvuuskerroksen Konfigurointi</a></li>
    <li><a href="#yhteensopivuus-kerroksen-asentaminen">Yhteensopivuskerroksen Asentaminen</a></li>
  </ul>
  <li><a href="#lte">LTE-only</a></li>
  <li><a href="#usb">USB-Laitteet</a></li>
  <li><a href="#wifi">Wi-Fi yksityisyys</a></li>
  <li><a href="#bugi">Sovellusten yhteensopivuus ongelmat</a></li>
</ul>
</nav>

<h2 id="paivitukset"><a href="#paivitukset">Päivitykset</a></h2>
<p>GrapheneOS päivittäjä tarkistaa päivitykset joka neljäs tunti kun internet yhteys on saatavilla ja lataa sekä asentaa tämän taustalla. 
Se jatkaa siitä mihin se jäi jos lataus keskeytyy joten ei tarvitse huolehtia tästä. Asentamisen häiritseminen ei myöskään ole ongelma sillä päivitys 
asennetaan nykyisen GrapheneOS version rinnalle ja siitä tulee aktiivinen vasta kun asennus on suoritettu. Kun päivitys on onnistunut, sinulle tulee ilmoitus 
ja sinun täytyy käynnistää laite uudelleen uuteen GrapheneOS versioon. Jos uuden version käynnistys epäonnistuu niin perääntyy tämä käyttämään aiempaa 
versiota ja yrittää ladata ja asentaa päivityksen uudestaan. Päivittäjä lataa ainoastaan muutokset koko käyttöjärjestelmän sijan ja toimii vaikka laite on 
lukittu, sillä päivittäjä on suunniteltu toimimaan ilman laitteen salauksen purkua. GrapheneOS 
muutosloki löytyy <a href="https://grapheneos.org/releases#changelog">Tästä</a>.</p>

<h2 id="update-asetukset"><a href="#update-asetukset">Päivitys asetukset</a></h2>
<p>Päivittäjän asetukset löytyvät Settings ➔ System ➔ Advenced ➔ Update settings.</p>

<p>"Check for updates" näppäin manuaalisesti aiheuttaa päivittäjän hakevan päivitystä heti kuin mahdollista. Se silti odottaa että alla olevat vaatimukset
täyttyvät.</p>

<p>"Release channel" voidaan vaihtaa oletuksesta Beta kanavaan jos haluaa auttaa testailun kanssa. Kaikki päivitykset menevät ensin Beta kanavan kautta
ennen vakaaseen pääsyä.</p>

<p>"Permitted networks" asetus kontrolloi mitä verkkoja päivityksen aikana voidaan käyttää. Oletuksena se käyttää mitä vain verkkoa.</p>

<p>"Require battery above warning level" näppäin määrää suoritetaanko päivitys alhaisessakin virrantilassa. Oletus arvo on 15%.</p>

<p>"Automatic reboot" tarkoittaa laitteen automaattista uudelleenkäynnistämistä kun päivitys on suoritettu loppuun ja laitetta ei ole käytetty hetkeen.</p>

<h2 id="update-turvallisuus"><a href="#update-turvallisuus">Päivitys Turvallisuus</a></h2>
<p><code>update_client</code> välttää päivityspalvelimilta saatuihin tietoihin signatuuri vahvistuksen ja alennussuojan avulla.
Verified-boot tarjoaa toisen signatuuritarkastus kerroksen sekä alennussuojan. GrapheneOS palvelimilla ei ole pääsyä GrapheneOS
signeerausavaimiin. Päivitysprotokolla ei lähetä tunnistettavia
tietoja. <code>update_client</code> toimii myös VPN / Tor yhteyden kanssa.
GrapheneOS ei kykene rakentamaan, signeeraamaan ja kuljettavaan haitallista päivitystä tietylle
käyttäjälle IMEI, sarjanumeron tai muiden tietojen perusteella. Päivityspalvelin päätyy ainoastaan
tietämään laitteen IP osoitteen, version jota se yrittää hakea ja version josta se yrittää hakea.</p>

<p>Päivityspaketit sisältävät sisäisen signatuurin jonka <code>update_client</code> vahvistaa
(Tai recovery jos on käytössä <a href="https://sgost1.github.io/suomalaistagostietoa/kautto.html#update-sideload">Sideload</a>).
Alentamiseen perustuvat hyökkäykset myös estetään ja alennusta ei voi suorittaa ilman että erityistä
alennuspäivitystä signeerataan Release avaimella. Sisäinen payload <code>update_enginelle</code> on
myös signeerattu joka tarjoaa toisen signatuurivahvistus kerroksen ja alennussuojan. Verified-Boot
ja Auditor toimivat viimeisenä suojana.</p>

<h2 id="update-pois"><a href="#update-pois">Päivitysten pois kytkeminen</a></h2>
<p>On vahvasti suositeltavaa jättää automaattiset päivitykset päälle. On kuitenkin mahdollista
kytkeä päivittäjäsovellus pois käytöstä sijainnista 
Asetukset ➔ Sovellukset ➔ Näytä Järjestelmä ➔ System Updater.</p>

<h2 id="update-sideload"><a href="#update-sideload">Päivitysten Sideloading</a></h2>
<p>Päivitykset voidaan ladata <a href="https://grapheneos.org/releases">Releases</a> sivulta ja 
asentaa recoveryn kautta adb sideloading ominaisuuden avulla. Zip tiedostot ovat signeerattu
ja vahvistettu recoveryn avulla.</p>

<p>Asentamista varten, on ensin mentävä recoveryyn. Tämän voi tehdä komennolla <code>adb reboot recovery</code>
tai valitsemalla "Recovery" vaihtoehto bootloader käyttöliittymästä.</p>

<p>Tämän jälkeen pitäisi näkyä vihreä Android makaamassa selälteen jota korjataan, sekä
teksti "No command" joka tarkoittaa että komentoa ei ole syötetty recoveryyn.</p>

<p>Seuraavaksi, paina Power ja volume-up näppäintä samanaikaisesti päästäksesi recovery valikkoon.
Valitse täältä "Apply update from ADB" ja asenna päivitys komennolla 
<code>adb sideload LAITE_NIMI-2021122018.zip</code>. Huomioi että käyttöjärjestelmässä
ei kuulu ottaa adb:tä käyttöön.</p>

<h2 id="exec"><a href="#exec">Exec Spawning</a></h2>
<p>GrapheneOS luo uudet prosessit <a href="https://github.com/GrapheneOS/platform_frameworks_base/commit/bcade0e783c6abcd8ac98fa62b8ac33d83bdb1ea">execin</a>
kautta, yleisen zygote mallin sijan. Tämä parantaa yksityisyyttä ja turvallisuutta pidemmän sovellusten laukaisuajan sekä korkeamman alku 
muistinkäytön hinnalla, se ei kuitenkaan vaikuta suorituskykyyn laukaisuajan jälkeen.</p>

<p>Zygote mallissa, mallisovellusprosessi luodaan käynnistyksen yhteydessä ja jokainen sovellus luodaan sen kloonina. Tämä johtaa 
siihen että jokaisella sovelluksella on sama muistisisältö ja järjestys, se heikentää useita turvallisuusominaisuuksia kuten 
Address-space-Layout-Randomizationia (ASLR), keon canaryarvoja, pinon canaryarvoja jne. Se rampauttaa nämä sillä jokaisella 
sovelluksella on jokaisen muunkin sovelluksen arvot ja nämä arvot eivät muutu ennen uudelleenkäynnistystä.</p>

<p>Lisätietoa exec-spawning ominaisuudesta löydät <a href="https://sgost1.github.io/suomalaistagostietoa/kautto.html#exec">Täältä</a>.</p>

<h2 id="selain"><a href="#selain">Selain</a></h2>
<p>GrapheneOS sisältää Vanadium sivuprojektin joka tarjoaa yksityisyys ja turvallisuus parannellun Chromium forkin. Vanadium on molemmat user-facing selain
sekä webview joka on järjestelmän selainmoottori jota lähes kaikki muut selaimet ja sovellukset käyttävät hakeakseen webistä sisältöä.

<br><br>Vanadiumin käyttäminen on vahvasti suositeltavaa. Bromite on kohtalainen vaihtoehto ja onkin ainoa toinen suositeltu selain. Bromite tarjoaa integroidun
mainostenestäjän ja sekoittaa selaimen sormenjäljet kehittyneemmin. Toistaiseksi, Vanadium on enemmän keskittynyt turvallisuus vahvistuksiin kun taas
Bromite enemmän selaimen sormenjäljen randomisointiin.

<br><br>Vanadium ei ole pelkkä user-facing selain vaan iso käyttöjärjestelmän komponentti. Tämän vuoksi Vanadium ei olekkaan saatavilla 
esimerkiksi Googlen Playkaupassa tai F-droidissa. Vanadium käyttää hyväkseen käyttöjärjestelmän muita komponentteja kuten hardened_malloccia
ja useimmat Vanadiumin vahvistuksista tuleekin tästä sillä useat muut selaimet ei pysty tähän vaan kiertää / rampauttaa useita ominaisuuksia
käyttämällä omia heikkoja versioita näistä.

<br><br>Chromium pohjaiset selaimet, kuten Vanadium ja Bromite tarjoaa vahvimman 
sandbox (<a href="https://fi.wikipedia.org/wiki/Hiekkalaatikko_(tietotekniikka)">hiekkalaatikko</a>) implementaation muihin verrattuna. 
Se on merkittävästi vaikeampaa paeta hiekkalaatikosta ja se antaa paljon enemmän kuin vain muurin selaimen ja käyttöjärjestelmän välille.
site_isolation pakottaa turvallisuusmuurit jokaisen sivuston ympärille asettaen jokaisen sivuston omaan hiekkalaatikkoon. Site_isolation
on äärettömän tärkeää vaikkei aktiivista hyökkäystä tapahtuisikaan <a href="https://en.wikipedia.org/wiki/Side-channel_attack">sivukanavahyökkäysten</a> 
vuoksi. Selaimet ilman robustia site_isolation ominaisuutta ovat myös erittäin heikkoja hyökkäyksiä kuten <a href="https://fi.wikipedia.org/wiki/Spectre_(tietoturvahaavoittuvuus)">Spectreä</a> 
vastaan. Mobiililaitteilla, muistinpuutteen vuoksi, siellä on eri site_isolation vaihtoehtoja. 
Vanadium <a href="https://github.com/GrapheneOS/Vanadium/blob/12/patches/0050-enable-strict-site-isolation-by-default-on-Android.patch">käyttää tiukkaa site_isolationia</a> ja Bromite
myös niillä laitteilla joissa on paljon muistia, kuten kaikilla GrapheneOS tuetuilla laitteilla.

<br><br>Chromiumilla on kohtalaiset exploittien mitigointi tekniikat, toisinkuin muilla. Tämä on paranneltua Vanadiumissa ottamalla käyttöön muitakin 
teknologioita kuten sellaisia jotka ei ole vielä upstreamissa käytössä koodin koon, suorituskyvyn tai muistinkäytön vuoksi.
Se esimerkiksi ottaa type-based CFIn käyttöön, käyttää vahvempaa SSP konfiguraatiota, sisältää <a href="https://v8.dev/blog/jitless">JIT-less</a> kytkimen,
käyttää <a href="https://github.com/GrapheneOS/Vanadium/blob/12/patches/0003-switch-to-fstack-protector-strong.patch">vahvaa fstack-protectioria</a>
ja <a href="https://github.com/GrapheneOS/Vanadium/tree/12/patches">paljon muuta</a>.

<br><br>On vahvasti suositeltavaa ettei yritä saavuttaa yksityisyyttä tai turvallisuutta selainten lisäosien avulla. Tämän takia ei olekkaan mahdollista käyttää
lisäosia Chromiumissa. Useimmat näistä on vain turhaa teatteri esitystä ilman selkeää uhkamallia ja vähentää yksityisyyttä luomalla uniikimman sormenjäljen.
Tämän vuoksi Tor suosittelee myös ettei asenna tai muunna selaimessa mitään. Jokainen pienikin muutos aiheuttaa joukosta erottautumisen ja lisää tapoja
joilla toimintaa voi seurata. "Enumerating badness" ei ole viisas tapa parantaa yksityisyyttä, samanlailla kuin antivirus sovellukset ei ole viisas tapa parantaa
turvallisuutta.

<br><br>WebView pohjaiset selaimet käyttävät Vanadiumin vahvistettua moottoria, mutta ei voi tarjota yhtä paljoa yksityisyyttä ja kontrollia sillä se on
rajoitettu kykyihin jota Webview widget tukee. Esimerkiksi ne ei voi tarjota asetusta Sensors luvan säätämiseen sillä tämä on melko uusi GrapheneOS
ominaisuus ja WebSettings API ei vielä tue sitä samanlailla kun se tukee esimerkiksi Javascriptiä, sijaintia, evästeitä jne.

<br><br>On hyvä välttää Gecko pohjaisia selaimia, kuten Firefoxia sillä ne ovat merkittävästi heikompia hyökkäyksille ja lisää jättimäisiä määriä hyökkäyspintaa.
Gecko ei sisällä WebView implementaatiota joten sitä on käytettävä nykyisen Vanadium selainmoottorin rinnalla, tämä tarkottaisi kahden selainmoottorin
pitämistä joka tuplaisi hyökkäyspinnan. Firefox / Gecko myös rampauttaa ja ohittaa useita GrapheneOS vahvistuksia ja siitä puuttuu useita ominaisuuksia kuten
tiukka seccomp-bpf filtteri, oma eristetty prosessi verkkotoiminnalle, CFI (Control Flow Integrity), CIG (Code Integrity Guard), vahvistettu
JIT moottori ja <a href="https://madaidans-insecurities.github.io/firefox-chromium.html">paljon muuta</a>.</p>

<h2 id="salaus"><a href="#salaus">Laitteen salaus</a></h2>
<p>GrapheneOS käyttää paranneltua versiota modernista Androidin tiedostojärjestelmä-pohjaisesta levysalauksesta. Kaikilla tuetuilla
  laitteilla on laitteistotuki tähän.</p>
  
  <p><code>data</code> osio säilöö kaiken pysyvän käyttöjärjestelmän tiedot. Kokolevynsalaus on implementoitu tiedostojärjestelmä-pohjaisen
  salauksen kautta metatietojen salauksen lisäksi. Kaikki tiedot, tiedostojen nimet ja muut metatiedot varastoidaan aina salattuna.
  Se on implementoitu Linux kernelin toimesta osana ext4 / f2fs implementaatiota.</p>
  
  <p>Levynsalaus avaimet ovat satunnaisesti luotu käyttäen korkealaatuista CSPRNG algoritmia ja ne säilötään salattuna
  avaimensalaus avaimella. Avaimensalaus avaimet luodaan runtimen yhteydessä ja niitä ei koskaan varastoida mihinkään.</p>
  
  <p>Sensitiivinen tieto säilötään käyttäjäprofiileissa. Käyttäjäprofiileilla on oma uniikki satunnaisesti luotu levynsalaus avain
  ja oma avain jolla tämä salataan. Omistajaprofiili on erityinen ja sitä käytetään koko järjestelmää koskevien tietojen varastoimiseen.
  Tämän vuoksi omistajaprofiili on avattava käynnistyksen jälkeen ensin ennen kuin muita profiileja voi käyttää. Omistajaprofiililla
  ei ole pääsyä muiden käyttäjäprofiilien tietoihin. Tiedostojärjestelmä-pohjainen salaus on suunniteltu niin että tiedostoja voi poistaa
  vaikkei niiden salausavaimiin ole pääsyä. Tämän vuoksi omistajaprofiili voi poistaa muita käyttäjäprofiileja.</p>
  
  <p>GrapheneOS lisää kyvyn lopettaa käyttökerran käyttäjäjprofiiliin kirjautumisen jälkeen. Se lisää End Session napin lukitusnäytölle
  sekä globaaliin toiminta valikkoon johon pääsee pitämällä Power nappia pohjassa. Tätä ei voi tehdä omistajaprofiilille ilman laitteen
  uudelleenkäynnistämistä sillä se säilöö koko järjestelmää koskevia tietoja.</p>
  
  <p>Toissijaisen käyttäjäprofiilin käyttäminen arkikäytössä mahdollistaa laitteen käytön ilman arkikäyttöprofiilin salauksen purkamista.
  Se myös mahdollistaa käyttäjäprofiilin asettamisen takaisin lepoon käytön jälkeen ilman laitteen uudelleenkäynnistämistä. Vaikka käyttäisi
  samaa salasanaa käyttäjäprofiilien välillä, jokainen käyttäjäprofiili tulisi silti saamaan uniikin avaimensalaus avaimen ja
  käyttöjärjestelmän luvaton haltuunotto ei vuotaisi toisen salasanaa. Etu eri salasanojen käyttämisessä on jos hyökkääjä fyysisesti
  näkee sinun syöttävän salasanan.</p>
  
  <p>Tiedostotiedot salataan käyttäen algoritmia AES-256-XTS ja tiedostojen nimet algoritmilla AES-256-CTS. Uniikki avain muodostetaan
  algoritmilla HKDF-SHA512 jokaiselle normaalille tiedostolle ja kansiolle profiilin salausavaimesta tai globaalista salausavaimesta.
  Kansioavainta käytetään salaamaan tiedostojen nimet. GrapheneOS lisää tiedosto nimen täytettä (padding) 16 bitistä 32 bittiin.</p>
  
  <p>OS muodostaa salasana tokenin käyttäjäprofiilin lukitusnäytön salasanasta käyttäen scryptiä. Tätä käytetään pää syötteenä
  avainten muodostamiseen</p>
  
  <p>OS säilöö korkean entropian satunnaisen arvon Weaver tokenina secure elementillä (Titan M tai Titan M2 Pixel puhelimissa) ja
  käyttää sitä toisena syötteenä avainten muodostamiseen. Weaver token varastoidaan Weaver avaimen rinnalla joka muodostetaan
  salasana tokenista. Jotta Weaver token saadaan, secure element vaatii oikean Weaver avaimen. Turvallista sisäistä ajastinta käytetään
  implementoidakseen laitteistopohjaisia viivästyksiä jokaisen avaimen muodostamis yrityksen jälkeen. Se nopeasti kasvaa kokonaiseenpäivään
  ennen kuin salasanaa voi yrittää uudelleen. Weaver myös tarjoaa hyvän tavan tietojen pyyhkimiseen sillä secure element voi luotettavasti
  pyyhkiä Weaver paikan. Käyttäjäprofiilin poistaminen pyyhkii tätä vastaavan Weaver paikan ja tehdasasetusten palauttaminen
  kaikki Weaver paikat. Secure element myös tarjoaa
  <a href="https://android-developers.googleblog.com/2018/05/insider-attack-resistance.html?msclkid=4339d079b11a11ecb34244953bdd94c4">Insider attack resistance</a>
  ominaisuuden jonka tarkoitus on estää laiteohjelmistopäivityksen ennen kuin omistajaprofiiliin on kirjauduttu.</p>
  
  <p>Viivästykset joita secure element valvoo:</p>
  
  <ul>
  <li>0 - 4 väärää yritystä: ei viivettä</li>
  <li>5 väärää yritystä: 30 sekunnin viive</li>
  <li>6 - 9 väärää yritystä: ei viivettä</li>
  <li>10 - 29 väärää yritystä: 30 sekunnin viive</li>
  <li>30 - 139 väärää yritystä: 30 × 2⌊(n - 30) ÷ 10⌋ jossa 'n' tarkoittaa väärien yritysten määrää. Tämä tarkoittaa että joka viive tuplaantuu
  joka kymmenes yritys</li>
  <li>140 tai enemmän vääriä yrityksiä: 1 päivä</li>
  </ul>
  
  <p>GrapheneOS ainoastaan tukee laitteita joissa on Weaver.</p>
  
  <p>Useat sovellukset käyttävät laitteiston avainvarastoa, heidän omaa salausimplementaatiota tai näiden yhdistelmää tarjotakseen
  toisen salaus kerroksen. Esimerkiksi sovellus voi käyttää laitteiston avainvarastoa salatakseen tietoja avaimella joka on
  ainoastaan käytössä kun laite on avattu.</p>

<h2 id="auditor"><a href="#auditor">Auditor</a></h2>
<p>Auditor ja <a href="https://source.android.com/security/verifiedboot">Verified-Boot</a> toimii viimeisenä puolustuslinjana. Verified-Boot varmistaa että
kaikki suoritettu koodi tulee luotettavasta lähteestä, hyökkääjän tai korruptoitumisen sijan. Auditorin tarkoitus sen sijan on hankkia Verified-Boot tiedot
luottamatta laitteen UI kerrokseen.</p>

<p>Verified-Boot luo luottamusketjun joka aloittaa muuttumattomasta RoTista (Root-Of-Trust), menee bootloaderiin sekä boot osioon ja muihinkin vahvistettuihin 
osioihin kuten <code>system</code> ja <code>vendor</code>. Jokaisen käynnistyksen yhteydessä, jokainen vaihe vahvistaa seuraavan vaiheen autenttisuuden ja 
koskemattomuuden ennen ketjun jatkamista.</p>

<p>Auditing prosessi vaatii kaksi laitetta, Auditorin joka voi olla mikä vain Android laite jossa on vähintään Android 8 sekä Auditee eli vahvistettava laite
jonka on oltava laite joka on julkaistu vähintään Android 8 kanssa. Jokainen laitemalli pitää myös olla erikseen integroitu sovellukseen. Lista
tuetuista Auditee laitteista löytyy <a href="https://attestation.app/about#device-support">Tästä</a>.</p>

<p>Auditor sovellus luo pysyvän laitteistopohjaisen avaimen jota Verified-Boot suojelee, sillä avainvarasto ei anna avaimia käytettäväksi jos itse OS ei
läpäise vahvistusta. Auditor signeeraa jokaisen vahvistuksen tällä pysyvällä avaimella. Ensimmäinen
tarkastus sisältää avaimen sertifikaattiketjun jonka Auditor pinnaa. Jokaisessa seuraavassa tarkastuksessa, Auditee luo uuden tuoreen avaimen jossa on uusi
todistehaaste ja lähettää tämän sertifikaattiketjun Auditorille. Auditor valvoo että batch avain ja tämän jälkeiset avaimet ovat samoja kuin 
näillä tuoreilla avaimilla.</p>

<h2 id="yhteen"><a href="#yhteen">Yhteensopivuuskerros</a></h2>
  <p>GrapheneOS sisältää yhteensopivuuskerroksen joka antaa mahdollisuuden asentaa ja käyttää virallista Google Play kauppaa ja palveluita
  normaalissa sovellushiekkalaatikossa. Nämä eivät saa minkäänlaisia erityisiä oikeuksia eikä ne ohita sovellushiekkalaatikkoa niin kuin
  stock-Androidilla. Näiden sijan GrapheneOS käyttää fallback koodia joka opettaa sovelluksia toimimaan normaalissa sovellusympäristössä.
  Itse käyttöjärjestelmä ei myöskään käytä näitä mihinkään.</p>

  <p>Perus toiminnot ja APIt ovat lähes kokonaan tuettuja ja se myös sisältää tuen dynaamisesti ladattaville moduleille. 
  Yhteensopivuuskerrosta tullaan parantamaan ajan myötä jonka yhteydessä se saa lisää toimintoja.</p>
    
  <p>GrapheneOS tarjoaa erillisen yhteensopivuuskerroksen Play Store sovellukselle joka opettaa tälle asentamisen, päivittämisen ja
  poistamisen ilman suuria oikeuksia. Se kysyy käyttäjältä lupaa saako se olla sovelluslähde ja ensimmäisen sovelluksen asentamisen yhteydessä
  että saako sovelluksen asentaa. Se käyttää Android 12 tuomaa tukea suorittaa päivityksiä ilman käyttäjän häiritsemistä tämän jälkeen.

  <h2 id="yhteensopivuus-kerroksen-konfigurointi"><a href="#yhteensopivuus-kerroksen-konfigurointi">Yhteensopivuskerroksen Konfigurointi</a></h2>
    <p>Yhteensopivuuskerroksen "asetukset" valikko asetukset löytyvät sijainnista Settings ➔ Apps ➔ Sandboxed Google Play.</p>

    <p>Oletuksena 'Reroute location requests to OS APIs' on päällä joka uudelleenohjaa sijaintipyynnöt käyttämään käyttöjärjestelmän 
    APIta sijainnin hakemiseksi. Tämän voi kytkeä pois päältä jos haluaa käyttää Googlen sijaintipalveluita sijainnin hakemiseksi. 
    Sijaintipyyntöjen uudelleenohjaaminen käyttöjärjestelmän geopaikannukseen käyttää enemmän laitteen virtaa kuin
    Googlen Play geopaikannus palvelu sillä GrapheneOS ei tarjoa verkko-pohjaista sijaintipalvelua ja implementoi sen ainoastaan
    GNSS / A-GPS toiminnon kautta.</p>

    <p>Yhteensopvuuskerroksen valikko tarjoaa myös linkin <a href="https://grapheneos.org/usage#sandboxed-google-play">GrapheneOS Usage</a> 
    sivulle, Playpalveluiden järjestelmä-asetuksiin ja Google asetuksiin.</p>

    <h2 id="yhteensopivuus-kerroksen-asentaminen"><a href="#yhteensopivuus-kerroksen-asentaminen">Yhteensopivuskerroksen Asentaminen</a></h2>
<p>Google Play on jaettu kolmeen eri sovellukseen: </p>
<ul>
<li>Google Services Framework (com.google.android.gsf)</li>
<li>Google Play services (com.google.android.gms)</li>
<li>Google Play Store (com.android.vending)</li>
</ul>

<p>Käyttääkseen Google Playta on vain asennettava nämä 3 sovellusta haluamaan käyttäjäprofiiliin.</p>

<p>Yksinkertaisin tapa on käyttää omistajaprofiilia. Sovellukset jotka ovat omistajaprofiilissa elävät hiekkalaatikossa niinkuin muissakin
eikä saa minkäänlaisia erityisiä oikeuksia. Jos haluaa valita mitkä sovellukset käyttävät yhteensopivuuskerrosta on tämä asennettava
käyttäjäprofiiliin jossa on nämä sovellukset.</p>

<p>Avaa GrapheneOS 'Apps' sovellus ja asenna nämä kolme sovellusta. Pelkän PLay kaupan asentaminen asentaa 2 muuta sovellusta. On hyvä
antaa "battery optimization exception" Google Play palveluille jos haluaa ilmoitusten toimivat kunnolla taustalla. Playkauppa yksin ei
ole tarvittava mutta se on enemmän kuin vain user-facing sovellus ja tarjoaa monia toimintoja kuten Play Asset Delivery,
Play Feature Delivery, sovelluksen sisällä ostamisen ja lisenssitarkastukset maksullisiin sovelluksiin. Playkauppa on myös turvallisin
tapa asentaa ja päivittää sovellukset.</p>

<p>Sovelluksen asentamisen jälkeen on hyvä avata Play kauppa ja painettava kirjautumista joka laukaisee alustamisen. Playkauppaan ei
tarvitse kirjautua jos ei halua mutta tämän painaminen saa kaiken toimimaan.</p>

<p>Yhteensopivuuskerros tukee myös Google Play Games palvelua jonka voi asentaa Play kaupan kautta sillä useat pelit vaativat tämän
olemassaolon.</p>
    

<h2 id="lte"><a href="#lte">LTE-only</a></h2>
<p>Tapauksessa jossa on luotettava LTE yhteys, voi hyökkäyspintaa vähentää poistamalla 2G, 3G ja 5G yhteydet asetuksista LTE-Only kytkimellä.
Perinteiset puhelut toimivat ainoastaan LTE-Only tilassa jos on liittymä jossa on VoLTE tai VoWi-Fi tuki.</p>

<p>Tämän ominaisuuden tarkoitus ei ole parantaa puheluiden ja SMS viestien luotettavuutta mutta voi jotenkuten nostaa tasoa joidenkin
hyökkäysten suorittamiselle. Se ei ole korvike päästä-päähän oleville puheluille ja viesteille tai edes TLS salaukselle. LTE tarjoaa perus
salauksen / todennuksen mutta se on itse verkostolle. LTE-Only kytkimen ainoa tarkoitus on tehdä etäältä suoritettavien hyökkäysten suorittamisesta
vaikeampaa poistamalla jättimäisiä määriä hyökkäyspintaa.</p>

<h2 id="usb"><a href="#usb">USB-Laitteet</a></h2>
<p>Oletuksena, GrapheneOS hylkää USB yhteydet kun laite on käynnissä ja näyttö lukittu. Tämän asetukset löytyvät 
Asetukset ➔ Suojaus ➔ USB accessories. Vaihtoehdot ovat:</p>
<ul>
<li>Hylkää USB pyynnöt</li>
<li>Salli USB pyynnöt kun laite on avattu (oletus)</li>
<li>Salli kaikki USB pyynnöt</li>
</ul>
<p>Android oletuksena lataa ainoastaan laitetta kun USB laite on asetettu ja hyväksytty. On erikseen annettava sille
lupa siirtää tiedostoja tai suorittaa muita toimintoja.</p>

<h2 id="wifi"><a href="#wifi">Wi-Fi yksityisyys</a></h2>
<p>GrapheneOS Wi-Fi on erittäin yksityinen ja lähes anonyymi kunhan sovellukset eivät vuoda tunnisteita verkolle. GrapheneOS esittää verkolle olevansa Android
eikä GrapheneOS, paitsi yhteyksien kannalta jota GrapheneOS tekee esimerkiksi hakeakseen päivityksiä GrapheneOS palvelimilta. Mutta nämäkin voidaan helposti
pakottaa VPN tai TOR palvelun kautta.</p>

<p>MAC osoite randomisointi on aina käytössä Wi-Fi verkkojen skannauksessa. Pixel puhelimissa on laiteohjelmistotuki joka 
mahdollistaa <a href="https://android-developers.googleblog.com/2017/04/changes-to-device-identifiers-in.html">paremman MAC osoitteen randomisoinnin</a>.
Monilla muilla laitteilla siellä on muitakin tunnisteita jota laite vuotaa kuten packet_sequence_number ja tähän liittyvät tiedot probe pyynnöissä.
Wi-Fi ja Bluetooth skannaus sijainnin havaitsemisen parantamiseksi on oletuksena pois käytöstä.</p>

<p>Pixelien stock OS käyttää tiettyä satunnaista MAC osoitetta jokaiselle verkolle. GrapheneOS säilyttää tämän vaihtoehdon mutta lisää uuden vaihtoehdon
"Use per-network-randomized MAC" joka on myös käytössä oletuksena. Tämä luo aina uuden MAC osoitteen kun verkkoja etsitään. DHCP client ei lähetä hostnamea
joten se ei rikoa MAC osoitteen randomisointia. Kun per-connection MAC osoite randomisointi on käytössä, DHCP clientin tila alustetaan aina ennen uudelleen
yhdistämistä estääkseen havaitsemista että kyseessä on sama laite kuin viimeksi. GrapheneOS myös kytkee pois tuen käyttää stable link-local IPv6 osoitteita
sillä nämä voi mahdollisesti toimia tunnisteina.</p>

<h2 id="bugi"><a href="#bugi">Sovellusten yhteensopivuus ongelmat</a></h2>
<p>GrapheneOS merkittävästi kohottaa laitteiston kykyjä tarjota parempaa suojaa muistinkorruptoitumis ongelmia vastaan. Jotkut näistä ominaisuuksista
on suunniteltu suoraan nappaamaan muistinkorruptio bugi joko tarkastuksella tai muistisuojauksella ja abortoimaan prosessi ettei sitä kyetä hyväksikäyttämään.
Jotkut ominaisuuksista mitigoi ongelmia hieman vähemmän suorasti kuten nollaamalla tiedot vapautuksen yhteydessä, eristetyillä muistialueilla, kasan randomisoinnilla,
canary arvoilla, vartija-alueilla, viivästetyllä osoitetilan uudelleenkäytöllä <a href="https://sgost1.github.io/suomalaistagostietoa/features.html">jne</a>.
GrapheneOS ei aiheuta näitä bugeja vaan ne ovat jo olemassa olevia bugeja jotka paljastuu vahvistusten vuoksi. Ominaisuuksien tarkoitus on estää exploitteja,
ei löytää bugeja mutta ne toimivat myös siinä.

<br><br>Samanlailla, jotkut muut yksityisyys ja turvallisuus parannukset vähentävät sovelluksien pääsyä tiettyihin resursseihin ja voi aiheuttaa toimimattomuutta.
Useimmat näistä on oletuksena aina käytössä mutta jotkut ovat käyttäjän hallinnassa kuten Sensors ja Network lupa sekä kyky kytkeä natiivin koodin debuggaus
pois parantaakseen sovellustan sandboxia. Sovellukset eivät ehkä kykene käsittelemään näiden oikeuksien pois ottoa. Varsinkin pankki sovellukset yleensä
vaativat natiivin koodin debuggausta luodakseen muureja ettei heidän koodia pystyisi tarkastelemaan.

<br><br>Jotkut sovellukset, yleensä sairaala / rahaan liittyvät myös käyttävät yhä enemmän Googlen SafetyNet vahvistus palvelua todentamaan käyttöjärjestelmän
autenttisuus. GrapheneOS läpäisee normaalin <code>basicIntegrity</code> tarkistuksen mutta ei ole Googlen sertifioima joten epäonnistuu
<code>ctsProfileMatch</code> tarkistuksen joka voi johtaa sovelluksen toimimattomuuteen ja viestiin kuten
"Laitteesi ei läpäissyt tietoturvatarkastustamme".

<br><br><a href="https://developer.android.com/training/articles/security-key-attestation">Laitteisto pohjainen 
käyttöjärjestelmän vahvistus</a> ominaisuus on osa AOSP:tä ja täysin tuettu GrapheneOS toimesta. SafetyNet vahvistus käyttää sitä
vahvistaakseen että laitteessa on Googlen sertifioima käyttöjärjestelmä. On kuitenkin mahdollista sovelluskehittäjien käyttää sitä suoraan sallimaan
muutkin täysin signeeratut käyttöjärjestelmät jossa on Verified-Boot ja täsmäävä turvallisuusmalli. GrapheneOS sisältää 
<a href="https://grapheneos.org/articles/attestation-compatibility-guide">yksityiskohtaisen oppaan</a>
sovelluskehittäjille miten laitteiston vahvistus APIta voi käyttää sallimaan Graphenen. Laitteiston vahvistus APIn käyttäminen suoraan antaa paljon
varmemman todennuksen kuin SafetyNet joten näillä sovelluksilla ei ole mitään hävittävää jos he alkaisi käyttämään kehittyneempää APIta joka ei vaadi Googlen Playpalveluita tai palvelimia
ja tukemaan käyttöjärjestelmää joka ei pelkästään pidä Androidin turvallisuusmallia, vaan merkittävästi myös vahvistaa sitä.</p>


</main>


        <footer>
            <a href="https://sgost1.github.io/suomalaistagostietoa/index.html"><img src="mask-icon.svg" width="512" height="512" alt=""/>GrapheneOS</a>
            <ul id="social">
                <li><a href="https://twitter.com/GrapheneOS">Twitter</a></li>
                <li><a href="https://github.com/GrapheneOS">GitHub</a></li>
                <li><a href="https://reddit.com/r/GrapheneOS">Reddit</a></li>
                <li><a href="https://www.linkedin.com/company/grapheneos/">LinkedIn</a></li>
            </ul>
        </footer>

</body>
</html>
